name : Build UI (cmd/constitutor)

on :
  workflow_dispatch :
    tags :
      - 'v*'

jobs :
  BuildExecs :
    runs-on : ubuntu-latest
    steps :
      - name : Checkout out source code
        uses : actions/checkout@v3
        with :
          fetch-depth : 0
          submodules : 'true'
      - name : Build and run Docker container
        uses : docker/build-push-action@v2
        with :
          context : .
          file : ./build.dockerfile
          tags : TheGreaterHeptavirate/motorola:latest
      - name : Extract files from container
        run : |
          CONTAINER_ID=$(docker ps -qf ancestor=TheGreaterHeptavirate/motorola:latest)
          docker cp $CONTAINER_ID:/build/* build/

      - name : "Upload files"
        uses : "actions/upload-artifact@v3.1.2"
        with :
          name : Builds-${{ matrix.os }}
          path : build/

